<?php
/*   _______________________________________
    |  Obfuscated by PMPR - Php Obfuscator  |
    |             689a2bf27a4a2             |
    |_______________________________________|
*/
 namespace Pmpr\Module\AutoLink; use DOMElement; use Pmpr\Common\Foundation\Interfaces\Constants; use Pmpr\Module\AutoLink\Model\Destination; use Pmpr\Module\AutoLink\Model\Phrase; use Pmpr\Module\AutoLink\Model\Score; use Pmpr\Module\AutoLink\Model\Source; class Engine extends Container { public function ymaaauwkcsmgqoic() { $eqwoegegiamegqsm = $this->caokeucsksukesyo()->skckwsgymkimyuwo(); $wwasomqkkiqscsgs = Destination::symcgieuakksimmu(); $sciomagaqmgggsiu = []; $acqqmqmcquukaqsc = $this->uosumyqkueiykgiu(); foreach ($acqqmqmcquukaqsc as $ekuqiqmikiicgoss) { $kgsmgousomgoamqe = $ekuqiqmikiicgoss[Constants::gygsikewooaciecc] ?? []; if ($kgsmgousomgoamqe) { foreach ($kgsmgousomgoamqe as $muowmkwsoauukiag) { if (!in_array($muowmkwsoauukiag, $sciomagaqmgggsiu, true)) { $sciomagaqmgggsiu[] = $muowmkwsoauukiag; } } } } if ($sciomagaqmgggsiu) { $ceiwsaacewygcsqg = $wwasomqkkiqscsgs->kumuygiiqswoyasy(); $gqgemcmoicmgaqie = $eqwoegegiamegqsm->kyckwuuiqwmyoqma()->omaeiiwasuqkeeak($wwasomqkkiqscsgs->myywwqkyiwawwquy($ceiwsaacewygcsqg))->omaeiiwasuqkeeak('posts.ID as post_id')->mmiqqgoaeccgwoqs($eqwoegegiamegqsm->owackeyiuiikegqg(Constants::eggygikowgywcayq, 'ID')->aqkyoweegqwuwsgw(Constants::qgmuskygocwmouos)->gmaouawykqgywcme())->mmiqqgoaeccgwoqs($eqwoegegiamegqsm->megqywqeuquawkim(Constants::gikuasuikwemyqoq, Constants::wmmucsiyiyusmssm)->aqkyoweegqwuwsgw(Constants::qgmuskygocwmouos))->mmiqqgoaeccgwoqs($eqwoegegiamegqsm->megqywqeuquawkim(Constants::isukysauqkiecswi, '0')->aqkyoweegqwuwsgw(Constants::qgmuskygocwmouos))->mmiqqgoaeccgwoqs($eqwoegegiamegqsm->megqywqeuquawkim(Constants::uouymeyqasaeckso, $sciomagaqmgggsiu)->gouskoeouiqwokqs()->aqkyoweegqwuwsgw(Constants::qgmuskygocwmouos))->mmiqqgoaeccgwoqs($eqwoegegiamegqsm->megqywqeuquawkim($ceiwsaacewygcsqg)->wegeyaguowmkqiac()); $sogksuscggsicmac = $wwasomqkkiqscsgs->iekyeyicoyyawomk()->aeggeuqycwawueqy($wwasomqkkiqscsgs->iekyeyicoyyawomk()->kqewyqqqiyiouaou($gqgemcmoicmgaqie), [Constants::ausqeuugegoygouq => 20, Constants::imywcsggckkcywgk => 1]); $oammesyieqmwuwyi = $sogksuscggsicmac[Constants::qwumqqyuasyskkkc]; if ($oammesyieqmwuwyi) { foreach ($oammesyieqmwuwyi as $igqsaukqcqscimok) { $gcqseksiskwueksc = $wwasomqkkiqscsgs->waecsyqmwascmqoa($igqsaukqcqscimok, Constants::kqigmeickowqiiyy); $this->ukkqgmomeycaeaey($gcqseksiskwueksc, Constants::mswoacegomcucaik); } } if (!$this->caokeucsksukesyo()->asgqmkcukouykiie()->iyiccksyewqymmqg($sogksuscggsicmac, 1)) { Process::symcgieuakksimmu()->skcuuuqkaqcmoyua(); } } } public function ukkqgmomeycaeaey($moqewomugocaueis, $mqyaskyaekmkegmg) { if (empty($moqewomugocaueis) || empty($mqyaskyaekmkegmg)) { return; } $meqocwsecsywiiqs = $yuucaqagmqisqyas = $sqeykgyoooqysmca = null; switch ($mqyaskyaekmkegmg) { case Constants::mswoacegomcucaik: $seumokooiykcomco = $this->caokeucsksukesyo()->ayueggmoqeeukqmq(); if ($post = $seumokooiykcomco->get($moqewomugocaueis, Constants::ckmqoekmugkggeym, true)) { $sqeykgyoooqysmca = $seumokooiykcomco->gueasuouwqysmomu($post); $meqocwsecsywiiqs = $seumokooiykcomco->qcgakseyaikigqco($post); $yuucaqagmqisqyas = $seumokooiykcomco->wykuawssiegcmeso($moqewomugocaueis); } break; case Constants::yoayaissyomokiui: $aoskwucuugeuaeus = $this->caokeucsksukesyo()->kckogqkiycqeumoa(); if ($iwewcwusemqaiggk = $aoskwucuugeuaeus->get($moqewomugocaueis)) { $sqeykgyoooqysmca = $aoskwucuugeuaeus->yyoeeseewqmmyaee($iwewcwusemqaiggk); $meqocwsecsywiiqs = $aoskwucuugeuaeus->qcgakseyaikigqco($iwewcwusemqaiggk); } break; } $meqocwsecsywiiqs = $this->suaeuucwwgumucek($meqocwsecsywiiqs, false); $yuucaqagmqisqyas = $this->suaeuucwwgumucek($yuucaqagmqisqyas, false); if ($sqeykgyoooqysmca && ($meqocwsecsywiiqs || $yuucaqagmqisqyas)) { $eqwoegegiamegqsm = $this->caokeucsksukesyo()->skckwsgymkimyuwo(); $wwasomqkkiqscsgs = Destination::symcgieuakksimmu(); $cmaccwokqweqweqi = $wwasomqkkiqscsgs->iekyeyicoyyawomk()->oqomcmyuuakigusk($eqwoegegiamegqsm->gwumowwouoisykio([Constants::eggygikowgywcayq => $moqewomugocaueis, Constants::wwcycgyaiaksckuk => $mqyaskyaekmkegmg])); $xmiqmguyioaoqsaq = 0; if (empty($cmaccwokqweqweqi)) { $sogksuscggsicmac = $wwasomqkkiqscsgs->gssiscqyqsacmeca()->gsegsiocqmsoayii([Constants::squoamkioomemiyi => $sqeykgyoooqysmca, Constants::qescuiwgsyuikume => $meqocwsecsywiiqs, Constants::usaygycaymimogmw => $yuucaqagmqisqyas, Constants::eggygikowgywcayq => $moqewomugocaueis, Constants::wwcycgyaiaksckuk => $mqyaskyaekmkegmg]); if (!is_wp_error($sogksuscggsicmac)) { $xmiqmguyioaoqsaq = $sogksuscggsicmac[Constants::gouqcwikiiygyasc]; } } else { $xmiqmguyioaoqsaq = $wwasomqkkiqscsgs->mwyqswsaeeewsosm($cmaccwokqweqweqi); $eouyueoqokecawsw = [Constants::squoamkioomemiyi => $sqeykgyoooqysmca, Constants::qescuiwgsyuikume => $meqocwsecsywiiqs, Constants::usaygycaymimogmw => $yuucaqagmqisqyas]; foreach ($eouyueoqokecawsw as $uusmaiomayssaecw => $cusosqmyoqiykqgw) { if ($cusosqmyoqiykqgw !== $wwasomqkkiqscsgs->waecsyqmwascmqoa($cmaccwokqweqweqi, $uusmaiomayssaecw)) { $eouyueoqokecawsw[$uusmaiomayssaecw] = $cusosqmyoqiykqgw; } else { unset($eouyueoqokecawsw[$uusmaiomayssaecw]); } } if ($eouyueoqokecawsw) { $wwasomqkkiqscsgs->gssiscqyqsacmeca()->wqikesawekycweoi($cmaccwokqweqweqi, $eouyueoqokecawsw, true); } } if ($xmiqmguyioaoqsaq) { $this->hgwmyswcgyccqeqy($xmiqmguyioaoqsaq, $moqewomugocaueis, $mqyaskyaekmkegmg); Process::symcgieuakksimmu()->uwskmuuseyegeeuu($xmiqmguyioaoqsaq, 1); } } } public function hgwmyswcgyccqeqy($xmiqmguyioaoqsaq, $moqewomugocaueis, $mqyaskyaekmkegmg) { $ewgwqamkygiqaawc = ''; switch ($mqyaskyaekmkegmg) { case Constants::mswoacegomcucaik: $ewgwqamkygiqaawc = $this->caokeucsksukesyo()->ayueggmoqeeukqmq()->souwykwwmyygqyqi($moqewomugocaueis, false); break; case Constants::yoayaissyomokiui: $ewgwqamkygiqaawc = $this->uwkmaywceaaaigwo()->kckogqkiycqeumoa()->meqceykmywmqgoym($moqewomugocaueis); break; } if ($ewgwqamkygiqaawc) { $smuykqsageuocuos = $this->caokeucsksukesyo()->gkksucgseqqemesc(); if ($smuykqsageuocuos->has($ewgwqamkygiqaawc, 'strong, h2')) { $goiaaeekgeqqmaqo = $smuykqsageuocuos->qaqiuweqoukkgqsk($ewgwqamkygiqaawc, 'h2:not([data-identify]), strong:not([data-identify])', function (DOMElement $ymyisaeksssueeik) use($smuykqsageuocuos) { $owqaeesoaygymmcy = $this->caokeucsksukesyo()->owgcciayoweymuws()->gykqksiwukaccoyg(Source::aiyuksmkquggmyqs); $smuykqsageuocuos->uysisegumsawmycq($ymyisaeksssueeik, 'data-identify', $owqaeesoaygymmcy); return $ymyisaeksssueeik; }); if ($goiaaeekgeqqmaqo && $ewgwqamkygiqaawc !== $goiaaeekgeqqmaqo) { $ewgwqamkygiqaawc = $goiaaeekgeqqmaqo; switch ($mqyaskyaekmkegmg) { case Constants::mswoacegomcucaik: $this->caokeucsksukesyo()->ayueggmoqeeukqmq()->update($moqewomugocaueis, [Constants::egkuckyqcaygmymg => $ewgwqamkygiqaawc]); break; case Constants::yoayaissyomokiui: $this->caokeucsksukesyo()->kckogqkiycqeumoa()->update($moqewomugocaueis, [Constants::egkuckyqcaygmymg => $ewgwqamkygiqaawc]); break; } } preg_match_all('/(<h2.*?>.*?<\\/h2>)/s', $ewgwqamkygiqaawc, $ymcousskmscsyees, PREG_OFFSET_CAPTURE); if (!empty($ymcousskmscsyees[0])) { $mgiqqesweuqmsymo = []; if (isset($ymcousskmscsyees[0][0][1]) && $ymcousskmscsyees[0][0][1] > 0) { $mgiqqesweuqmsymo[] = substr($ewgwqamkygiqaawc, 0, $ymcousskmscsyees[0][0][1]); } foreach ($ymcousskmscsyees[0] as $momcykaoccoymeig => $iuimqckcgwwkgygo) { $ggkaciewmeqmgckg = $iuimqckcgwwkgygo[1]; $qmeuaeiseuacgiqc = isset($ymcousskmscsyees[0][$momcykaoccoymeig + 1]) ? $ymcousskmscsyees[0][$momcykaoccoymeig + 1][1] : strlen($ewgwqamkygiqaawc); $mgiqqesweuqmsymo[] = substr($ewgwqamkygiqaawc, $ggkaciewmeqmgckg, $qmeuaeiseuacgiqc - $ggkaciewmeqmgckg); } foreach ($mgiqqesweuqmsymo as $osykqueyuiqkukcw) { $eimoeiuiokiukeqi = null; $uakqkemgwcguemgi = $smuykqsageuocuos->wugqmqwisygwoeas($osykqueyuiqkukcw, 'h2'); if ($uakqkemgwcguemgi) { $owqaeesoaygymmcy = $smuykqsageuocuos->guaqqcyuaeucmgoy($uakqkemgwcguemgi, 'data-identify'); $wgkisieqccekcwya = $smuykqsageuocuos->skciuoqgiqoawwwe($uakqkemgwcguemgi, true); $eimoeiuiokiukeqi = $this->emmqgiegugsycumi($wgkisieqccekcwya, $owqaeesoaygymmcy, Source::cqqgeyyqiugckwgw, $xmiqmguyioaoqsaq); } $smuykqsageuocuos->qaqiuweqoukkgqsk($osykqueyuiqkukcw, 'strong', function (DOMElement $ymyisaeksssueeik) use($smuykqsageuocuos, $eimoeiuiokiukeqi, $xmiqmguyioaoqsaq) { $owqaeesoaygymmcy = $smuykqsageuocuos->guaqqcyuaeucmgoy($ymyisaeksssueeik, 'data-identify'); $qcqouasmmaumioew = $smuykqsageuocuos->skciuoqgiqoawwwe($ymyisaeksssueeik, true); $this->emmqgiegugsycumi($qcqouasmmaumioew, $owqaeesoaygymmcy, Source::yawkygsammoiwywe, $xmiqmguyioaoqsaq, $eimoeiuiokiukeqi); return $ymyisaeksssueeik; }, 0, false); } } } } } public function emmqgiegugsycumi($somkywoaqsaocseu, $owqaeesoaygymmcy, $sqeykgyoooqysmca, $xmiqmguyioaoqsaq, $gqumacwamusueoqa = null) { $somkywoaqsaocseu = $this->suaeuucwwgumucek($somkywoaqsaocseu); if (empty($somkywoaqsaocseu) || empty($owqaeesoaygymmcy) || empty($sqeykgyoooqysmca) || empty($xmiqmguyioaoqsaq)) { return false; } $mkcymmgyaiqcqqms = Source::symcgieuakksimmu(); $eqwoegegiamegqsm = $this->caokeucsksukesyo()->skckwsgymkimyuwo(); $gqgemcmoicmgaqie = $eqwoegegiamegqsm->kyckwuuiqwmyoqma()->mmiqqgoaeccgwoqs($eqwoegegiamegqsm->megqywqeuquawkim(Constants::squoamkioomemiyi, $sqeykgyoooqysmca))->mmiqqgoaeccgwoqs($eqwoegegiamegqsm->megqywqeuquawkim($mkcymmgyaiqcqqms::uoyosewemacawcmg, $xmiqmguyioaoqsaq))->mmiqqgoaeccgwoqs($eqwoegegiamegqsm->megqywqeuquawkim(Constants::IDENTIFIER, $owqaeesoaygymmcy)); if ($gqumacwamusueoqa) { $gqgemcmoicmgaqie->mmiqqgoaeccgwoqs($eqwoegegiamegqsm->megqywqeuquawkim($mkcymmgyaiqcqqms::umyomemqwccgmuki, $gqumacwamusueoqa)); } else { $gqgemcmoicmgaqie->mmiqqgoaeccgwoqs($eqwoegegiamegqsm->megqywqeuquawkim($mkcymmgyaiqcqqms::umyomemqwccgmuki)->wegeyaguowmkqiac()); } $egsumesakcaaukem = $mkcymmgyaiqcqqms->iekyeyicoyyawomk()->oqomcmyuuakigusk($gqgemcmoicmgaqie); $qewwaqmimwcwiakq = Phrase::symcgieuakksimmu(); $oquoymwysyummgaa = 0; $icswuaiqeooqqeqc = $qewwaqmimwcwiakq->iekyeyicoyyawomk()->akkkoiiymmamsauc($somkywoaqsaocseu, Constants::TEXT); if (!$icswuaiqeooqqeqc) { $ywacwuiaamkyseeo = $qewwaqmimwcwiakq->gssiscqyqsacmeca()->gsegsiocqmsoayii([Constants::TEXT => $somkywoaqsaocseu], true); if (!is_wp_error($ywacwuiaamkyseeo)) { $oquoymwysyummgaa = $ywacwuiaamkyseeo[Constants::gouqcwikiiygyasc]; } } else { $oquoymwysyummgaa = $qewwaqmimwcwiakq->mwyqswsaeeewsosm($icswuaiqeooqqeqc); } $aokagokqyuysuksm = $egsumesakcaaukem ? $mkcymmgyaiqcqqms->mwyqswsaeeewsosm($egsumesakcaaukem) : 0; if (empty($egsumesakcaaukem)) { $wmcmccycgwaqaicw = $mkcymmgyaiqcqqms->gssiscqyqsacmeca()->gsegsiocqmsoayii([Constants::squoamkioomemiyi => $sqeykgyoooqysmca, Constants::ciywsqoeiymemsys => Constants::sgoswgskyiiwkyuo, $mkcymmgyaiqcqqms::icqsuoqewygciosa => $oquoymwysyummgaa, $mkcymmgyaiqcqqms::umyomemqwccgmuki => $gqumacwamusueoqa, Constants::IDENTIFIER => $owqaeesoaygymmcy, $mkcymmgyaiqcqqms::uoyosewemacawcmg => $xmiqmguyioaoqsaq]); if (!is_wp_error($wmcmccycgwaqaicw)) { $aokagokqyuysuksm = $wmcmccycgwaqaicw[Constants::gouqcwikiiygyasc]; } } else { if ($oquoymwysyummgaa !== $mkcymmgyaiqcqqms->waecsyqmwascmqoa($egsumesakcaaukem, $mkcymmgyaiqcqqms::icqsuoqewygciosa)) { $mkcymmgyaiqcqqms->gssiscqyqsacmeca()->wqikesawekycweoi($egsumesakcaaukem, [$mkcymmgyaiqcqqms::icqsuoqewygciosa => $oquoymwysyummgaa, $mkcymmgyaiqcqqms::umyomemqwccgmuki => $gqumacwamusueoqa]); $aokagokqyuysuksm = $mkcymmgyaiqcqqms->mwyqswsaeeewsosm($egsumesakcaaukem); } } return $aokagokqyuysuksm; } public function qawoscykuqkcagws($smwqmsmkuymwawce, ?string $mqyaskyaekmkegmg = null) { $muowmkwsoauukiag = null; $eqwoegegiamegqsm = $this->caokeucsksukesyo()->skckwsgymkimyuwo(); $wwasomqkkiqscsgs = Destination::symcgieuakksimmu(); if (!empty($mqyaskyaekmkegmg)) { if (is_numeric($smwqmsmkuymwawce)) { $muowmkwsoauukiag = $wwasomqkkiqscsgs->iekyeyicoyyawomk()->oqomcmyuuakigusk([$eqwoegegiamegqsm->megqywqeuquawkim(Constants::wwcycgyaiaksckuk, $mqyaskyaekmkegmg), $eqwoegegiamegqsm->megqywqeuquawkim(Constants::eggygikowgywcayq, $smwqmsmkuymwawce)]); } else { } } else { if (is_numeric($smwqmsmkuymwawce)) { $muowmkwsoauukiag = $wwasomqkkiqscsgs->iekyeyicoyyawomk()->akkkoiiymmamsauc($smwqmsmkuymwawce); } else { if (is_object($smwqmsmkuymwawce) || is_array($smwqmsmkuymwawce)) { $muowmkwsoauukiag = $smwqmsmkuymwawce; } } } return $muowmkwsoauukiag; } public function xakqayiouccogesq($smwqmsmkuymwawce, ?string $mqyaskyaekmkegmg = null) { $muowmkwsoauukiag = $this->qawoscykuqkcagws($smwqmsmkuymwawce, $mqyaskyaekmkegmg); if ($muowmkwsoauukiag) { $wwasomqkkiqscsgs = Destination::symcgieuakksimmu(); $moqewomugocaueis = $wwasomqkkiqscsgs->waecsyqmwascmqoa($muowmkwsoauukiag, Constants::eggygikowgywcayq); $mqyaskyaekmkegmg = $wwasomqkkiqscsgs->ogegcqqcukiaqscy(Constants::squoamkioomemiyi, $muowmkwsoauukiag); $ewgwqamkygiqaawc = ''; switch ($mqyaskyaekmkegmg) { case Constants::mswoacegomcucaik: $ewgwqamkygiqaawc = $this->caokeucsksukesyo()->ayueggmoqeeukqmq()->souwykwwmyygqyqi($moqewomugocaueis); break; case Constants::yoayaissyomokiui: $ewgwqamkygiqaawc = $this->uwkmaywceaaaigwo()->kckogqkiycqeumoa()->meqceykmywmqgoym($moqewomugocaueis); break; } if ($ewgwqamkygiqaawc) { $mkcymmgyaiqcqqms = Source::symcgieuakksimmu(); $oseqkueswiwsceis = $mkcymmgyaiqcqqms->iekyeyicoyyawomk()->cieaqygkucwoqwke([$mkcymmgyaiqcqqms::uoyosewemacawcmg => $wwasomqkkiqscsgs->mwyqswsaeeewsosm($muowmkwsoauukiag)]); $smuykqsageuocuos = $this->caokeucsksukesyo()->gkksucgseqqemesc(); foreach ($oseqkueswiwsceis as $egsumesakcaaukem) { $scwiymciagumsuiw = $mkcymmgyaiqcqqms->ogegcqqcukiaqscy(Constants::squoamkioomemiyi, $egsumesakcaaukem) === $mkcymmgyaiqcqqms::yawkygsammoiwywe ? 'strong' : 'h2'; $owqaeesoaygymmcy = $mkcymmgyaiqcqqms->waecsyqmwascmqoa($egsumesakcaaukem, Constants::IDENTIFIER); if ($smuykqsageuocuos->has($ewgwqamkygiqaawc, "{$scwiymciagumsuiw}[{$owqaeesoaygymmcy}]")) { $mkcymmgyaiqcqqms->gssiscqyqsacmeca()->sgcuwcowgwimgsgk($mkcymmgyaiqcqqms->mwyqswsaeeewsosm($egsumesakcaaukem), true); } } } } } public function cysqwocigwyquqas($xmiqmguyioaoqsaq, $suaemuyiacqyugsm, bool $goyamqigsmqwymmg = false) { if ($muowmkwsoauukiag = $this->qawoscykuqkcagws($xmiqmguyioaoqsaq)) { $eqwoegegiamegqsm = $this->caokeucsksukesyo()->skckwsgymkimyuwo(); $amccoggygucuuiua = Score::symcgieuakksimmu(); $mkcymmgyaiqcqqms = Source::symcgieuakksimmu(); $qewwaqmimwcwiakq = Phrase::symcgieuakksimmu(); $wwasomqkkiqscsgs = Destination::symcgieuakksimmu(); $sqeykgyoooqysmca = $wwasomqkkiqscsgs->waecsyqmwascmqoa($muowmkwsoauukiag, Constants::squoamkioomemiyi); $acqqmqmcquukaqsc = $this->uosumyqkueiykgiu(Constants::iocouekmygsaocuo, $sqeykgyoooqysmca, true); if ($acqqmqmcquukaqsc) { $xmiqmguyioaoqsaq = $wwasomqkkiqscsgs->mwyqswsaeeewsosm($muowmkwsoauukiag); $gcsemeqqqcoqeooa = $qewwaqmimwcwiakq->iekyeyicoyyawomk(); $gqgemcmoicmgaqie = $eqwoegegiamegqsm->kyckwuuiqwmyoqma()->mmiqqgoaeccgwoqs($eqwoegegiamegqsm->owackeyiuiikegqg()->ggmcoioqwgyccyus()->sokmmiiuyqiuoqia($qewwaqmimwcwiakq::iukymyausumiugqk))->mmiqqgoaeccgwoqs($eqwoegegiamegqsm->owackeyiuiikegqg()->ggmcoioqwgyccyus()->sokmmiiuyqiuoqia($qewwaqmimwcwiakq::isoocgsyuyscusay))->mmiqqgoaeccgwoqs($eqwoegegiamegqsm->megqywqeuquawkim($mkcymmgyaiqcqqms::uoyosewemacawcmg, $xmiqmguyioaoqsaq)->asumqyigwsqmyeoc($mkcymmgyaiqcqqms))->mmiqqgoaeccgwoqs($eqwoegegiamegqsm->megqywqeuquawkim(Constants::squoamkioomemiyi, array_keys($acqqmqmcquukaqsc))->asumqyigwsqmyeoc($mkcymmgyaiqcqqms))->yockscoguugkeumq([$qewwaqmimwcwiakq->kumuygiiqswoyasy(true), $qewwaqmimwcwiakq->myywwqkyiwawwquy(Constants::TEXT), $mkcymmgyaiqcqqms->myywwqkyiwawwquy(Constants::squoamkioomemiyi)])->omaeiiwasuqkeeak($qewwaqmimwcwiakq->kumuygiiqswoyasy(true))->omaeiiwasuqkeeak($qewwaqmimwcwiakq->myywwqkyiwawwquy(Constants::TEXT))->omaeiiwasuqkeeak($mkcymmgyaiqcqqms->myywwqkyiwawwquy(Constants::squoamkioomemiyi)); if (!$goyamqigsmqwymmg) { $gqgemcmoicmgaqie->mmiqqgoaeccgwoqs($eqwoegegiamegqsm->megqywqeuquawkim(Constants::ciywsqoeiymemsys, Constants::sgoswgskyiiwkyuo)->asumqyigwsqmyeoc($mkcymmgyaiqcqqms)); } else { $gqgemcmoicmgaqie->mmiqqgoaeccgwoqs($eqwoegegiamegqsm->megqywqeuquawkim(Constants::ciywsqoeiymemsys, [Constants::sgoswgskyiiwkyuo, Constants::gikauwqcswqcsmqw])->asumqyigwsqmyeoc($mkcymmgyaiqcqqms)); } $sogksuscggsicmac = $gcsemeqqqcoqeooa->aeggeuqycwawueqy($gcsemeqqqcoqeooa->kqewyqqqiyiouaou($gqgemcmoicmgaqie), [Constants::ausqeuugegoygouq => 20, Constants::imywcsggckkcywgk => $suaemuyiacqyugsm]); $esmaqoikwysmecmu = $sogksuscggsicmac[Constants::qwumqqyuasyskkkc] ?? []; if ($esmaqoikwysmecmu) { $igkeeiamaoykccmq = 'title'; $qgowgcsuycquswmo = [ "0.4 * (1 - LEAST(LEVENSHTEIN_SCORE('%1\$s', %2\$s) / 100, 1))", "0.6 * JACCARD_SIMILARITY('%1\$s', %2\$s)", ]; $ysamcoymwymqokou = $wwasomqkkiqscsgs->iekyeyicoyyawomk(); foreach ($esmaqoikwysmecmu as $icswuaiqeooqqeqc) { $sqeykgyoooqysmca = $mkcymmgyaiqcqqms->ogegcqqcukiaqscy(Constants::squoamkioomemiyi, $icswuaiqeooqqeqc, $mkcymmgyaiqcqqms::yawkygsammoiwywe); $ekuqiqmikiicgoss = $acqqmqmcquukaqsc[$sqeykgyoooqysmca] ?? false; if ($ekuqiqmikiicgoss) { $somkywoaqsaocseu = 'مهاجرت روسیه با 35 تحصیل شرایط هزینه‌ها مدارک 2025'; $kgsmgousomgoamqe = $ekuqiqmikiicgoss[Constants::gygsikewooaciecc] ?? []; $qmimsiuoiwuuuscy = '(' . sprintf(implode('+', $qgowgcsuycquswmo), esc_sql($somkywoaqsaocseu), $igkeeiamaoykccmq) . ')'; $ukewoymaumsmmswq = $eqwoegegiamegqsm->kyckwuuiqwmyoqma()->omaeiiwasuqkeeak($mkcymmgyaiqcqqms->kumuygiiqswoyasy())->omaeiiwasuqkeeak(Constants::qescuiwgsyuikume)->omaeiiwasuqkeeak("{$qmimsiuoiwuuuscy} AS similarity", true)->mmiqqgoaeccgwoqs($eqwoegegiamegqsm->megqywqeuquawkim(Constants::squoamkioomemiyi, $kgsmgousomgoamqe))->mmiqqgoaeccgwoqs($eqwoegegiamegqsm->megqywqeuquawkim($igkeeiamaoykccmq, $somkywoaqsaocseu)->oigseukmwsuayccc())->mmiqqgoaeccgwoqs($eqwoegegiamegqsm->megqywqeuquawkim($wwasomqkkiqscsgs->kumuygiiqswoyasy(), $xmiqmguyioaoqsaq)->maqiysyuqmwcqoig('!='))->mmiqqgoaeccgwoqs($eqwoegegiamegqsm->owogyemaccuymycq($amccoggygucuuiua::skgkcgewayieuwsk)->kgyigewyuumysume()->yogqsokgsqemsuoq())->wsacuksekeaemucu(20); if (preg_match_all('/\\d+/', $somkywoaqsaocseu, $meyiiwcswqmuggyg)) { $ygmmaywsqqycaaok = $meyiiwcswqmuggyg[0]; if ($ygmmaywsqqycaaok) { $iyywkasguikswkgy = count($ygmmaywsqqycaaok); $mogcyuaockoeqaqk = []; foreach ($ygmmaywsqqycaaok as $eusockqasqqmoess) { $meayewusoiyawawa = preg_quote($eusockqasqqmoess, '/'); $mogcyuaockoeqaqk[] = "IF({$igkeeiamaoykccmq} REGEXP '(^|[^0-9]){$meayewusoiyawawa}([^0-9]|\$)', 1, 0)"; } $csakyesqgmycgeim = implode(' + ', $mogcyuaockoeqaqk); $ukewoymaumsmmswq->omaeiiwasuqkeeak("({$csakyesqgmycgeim}) / {$iyywkasguikswkgy} as number_score", true); $ukewoymaumsmmswq->mmiqqgoaeccgwoqs($eqwoegegiamegqsm->sqcwsmeosqikckgi('number_score', 1)->kgyigewyuumysume()->maqiysyuqmwcqoig('=')); } } $eeiguyoeakmwswmq = $ysamcoymwymqokou->cieaqygkucwoqwke($ukewoymaumsmmswq); if (!empty($eeiguyoeakmwswmq)) { $oquoymwysyummgaa = $qewwaqmimwcwiakq->mwyqswsaeeewsosm($icswuaiqeooqqeqc); $gkyciwoiiisgywcs = $this->caokeucsksukesyo()->ywqgcuymeiswqyqc(); foreach ($eeiguyoeakmwswmq as $iemimsskigsgycqm) { $mkegkeiqscgyeqso = $wwasomqkkiqscsgs->mwyqswsaeeewsosm($iemimsskigsgycqm); if (!$amccoggygucuuiua->iekyeyicoyyawomk()->exists($eqwoegegiamegqsm->gwumowwouoisykio([$amccoggygucuuiua::icqsuoqewygciosa => $oquoymwysyummgaa, $amccoggygucuuiua::uoyosewemacawcmg => $mkegkeiqscgyeqso]))) { $amccoggygucuuiua->gssiscqyqsacmeca()->gsegsiocqmsoayii([$amccoggygucuuiua::icqsuoqewygciosa => $oquoymwysyummgaa, $amccoggygucuuiua::skgkcgewayieuwsk => $gkyciwoiiisgywcs->get($iemimsskigsgycqm, 'similarity'), $amccoggygucuuiua::uoyosewemacawcmg => $mkegkeiqscgyeqso], true); } } } } } if (!$this->caokeucsksukesyo()->asgqmkcukouykiie()->iyiccksyewqymmqg($sogksuscggsicmac, $suaemuyiacqyugsm)) { Process::symcgieuakksimmu()->uwskmuuseyegeeuu($xmiqmguyioaoqsaq, $suaemuyiacqyugsm + 1, $goyamqigsmqwymmg); } } } } } public function uosumyqkueiykgiu($tsuauommsquiesmk = null, $ikeuqaskyceuqgmm = null, bool $yyeuiswqwqymcmce = false) : array { $ywmkwiwkosakssii = [Constants::aisguagukaewucii => Constants::ckmqoekmugkggeym, Constants::wkweqssoakmmmguq => [Constants::yyicwqsqaecyqwco, Setting::cgqecaaeyyesqgmq, Constants::gygsikewooaciecc, Constants::iocouekmygsaocuo]]; if ($tsuauommsquiesmk) { $ywmkwiwkosakssii[Constants::kyyscqqmsikeuaea] = $tsuauommsquiesmk; $ywmkwiwkosakssii[Constants::wosqwewmqmyweqea] = $ikeuqaskyceuqgmm; } $acqqmqmcquukaqsc = (array) $this->weysguygiseoukqw(Constants::eeeoygaqqmoukaeg, [], $ywmkwiwkosakssii); if ($yyeuiswqwqymcmce) { $kuuggasqumwwqkok = []; foreach ($acqqmqmcquukaqsc as $ekuqiqmikiicgoss) { $qwwuweqkkiikksks = $ekuqiqmikiicgoss[Setting::cgqecaaeyyesqgmq]; if (Source::yawkygsammoiwywe === $qwwuweqkkiikksks) { $kuuggasqumwwqkok[Source::yawkygsammoiwywe] = $ekuqiqmikiicgoss; } if (Source::cqqgeyyqiugckwgw === $qwwuweqkkiikksks) { $kuuggasqumwwqkok[Source::cqqgeyyqiugckwgw] = $ekuqiqmikiicgoss; } if (count($kuuggasqumwwqkok) === 2) { break; } } $acqqmqmcquukaqsc = $kuuggasqumwwqkok; } return $acqqmqmcquukaqsc; } public function suaeuucwwgumucek(?string $cmwygeyygwqaemaq, bool $ckyskywmqeusaecg = true) : ?string { if ($cmwygeyygwqaemaq) { $cmwygeyygwqaemaq = preg_replace('/[^\\w\\s\\x{0600}-\\x{06FF}]/u', ' ', $cmwygeyygwqaemaq); $cmwygeyygwqaemaq = preg_replace_callback('/[\\x{06F0}-\\x{06F9}\\x{0660}-\\x{0669}]/u', function ($uammqaqiwgcmeska) { $mqwsmsykyouoomgm = mb_ord($uammqaqiwgcmeska[0], 'UTF-8'); if ($mqwsmsykyouoomgm >= 0x6f0 && $mqwsmsykyouoomgm <= 0x6f9) { return $mqwsmsykyouoomgm - 0x6f0; } else { return $mqwsmsykyouoomgm - 0x660; } }, $cmwygeyygwqaemaq); if ($this->caokeucsksukesyo()->cqusmgskowmesgcg()->iqqgmieeqemiowuk('persian-text', Constants::ycaueuokiswkqaoc)) { $cmwygeyygwqaemaq = pr_utility_persian_text_normalize($cmwygeyygwqaemaq); $cmwygeyygwqaemaq = pr_utility_persian_text_remove_stopwords($cmwygeyygwqaemaq, $ckyskywmqeusaecg); } } return $cmwygeyygwqaemaq; } }
