<?php
/*   _______________________________________
    |  Obfuscated by PMPR - Php Obfuscator  |
    |             689bb29ab3874             |
    |_______________________________________|
*/
 namespace Pmpr\Module\AutoLink; use Pmpr\Common\Foundation\Interfaces\Constants; use Pmpr\Module\AutoLink\Model\ContentSegment; use Pmpr\Module\AutoLink\Model\PhraseDictionary; use Pmpr\Module\AutoLink\Model\PhraseMatch; use Pmpr\Module\AutoLink\Model\SiteContent; use Pmpr\Module\AutoLink\Traits\EngineTrait; class Hook extends Container { use EngineTrait; public function wigskegsqequoeks() { $this->qcsmikeggeemccuu(Process::cgkmwmkumwacaciy, [$this, 'cysqwocigwyquqas'])->qcsmikeggeemccuu(Process::aeukmokmyqieyoyi, [$this, 'uoukcoigccuuueis'])->qcsmikeggeemccuu(Process::myqwsmqumsyskkms, [$this, 'ikawswqoouqauuwg'], 10, 3); $this->qcsmikeggeemccuu(Process::uqkqoamoosaksoki, [$this, 'ammmmcskmmswueqe'])->qcsmikeggeemccuu(Process::eoewsgikcugicsae, [$this, 'iiuomscwsakeqwak']); $this->qcsmikeggeemccuu(Process::ecwyoukiggiccaqs, [$this, 'cakkuykwauwcesou'])->qcsmikeggeemccuu(Process::fkyoyyyqequgqsgo, [$this, 'swmkeqggyeewmseu'], 10, 2); $this->qcsmikeggeemccuu('admin_init', [$this, 'yeyiguyegmmyusea'])->qcsmikeggeemccuu('edit_term', [$this, 'gmiuouymkmiwuouw'])->qcsmikeggeemccuu('create_term', [$this, 'gmiuouymkmiwuouw'])->qcsmikeggeemccuu('delete_term', [$this, 'swoqwoekwmcwcsos'])->qcsmikeggeemccuu('deleted_post', [$this, 'ukqieeemykgisiic'])->qcsmikeggeemccuu('save_post', [$this, 'sgmieuaqmigueiqg'], 10, 2); } public function kgquecmsgcouyaya() { $this->cecaguuoecmccuse('the_content', [$this, 'iqmiseecmyaeewmm'], 999, 2)->cecaguuoecmccuse('term_description', [$this, 'eiwakaiyeuiosyyk'], 10, 2); } public function yeyiguyegmmyusea() { Process::symcgieuakksimmu()->eywqyoiwwesukuwa(); Process::symcgieuakksimmu()->uugcgimggkswwugi(); } public function ukqieeemykgisiic($gcqseksiskwueksc) { if (!$gcqseksiskwueksc) { return; } $this->iuoowsaoeemaeysu($gcqseksiskwueksc, Constants::mswoacegomcucaik); } public function sgmieuaqmigueiqg($gcqseksiskwueksc, $post = null) { if (!$gcqseksiskwueksc || $this->caokeucsksukesyo()->owicscwgeuqcqaig()->somkqoqeimmeemuq()) { return; } $seumokooiykcomco = $this->caokeucsksukesyo()->ayueggmoqeeukqmq(); $useksmwkuswkwcqg = $seumokooiykcomco->gueasuouwqysmomu($post); if (in_array($useksmwkuswkwcqg, [Constants::wgksuiksscywgoya, Constants::cqycgsyykemiygou], true) || !$seumokooiykcomco->yaacqmguuiqwoqay($post)) { return; } Process::symcgieuakksimmu()->usmagmyeasiigokm($gcqseksiskwueksc, Constants::mswoacegomcucaik); } public function swoqwoekwmcwcsos($ucicuwcaawugkseg) { $this->iuoowsaoeemaeysu($ucicuwcaawugkseg, Constants::yoayaissyomokiui); } public function gmiuouymkmiwuouw($ucicuwcaawugkseg) { if (!$ucicuwcaawugkseg) { return; } Process::symcgieuakksimmu()->usmagmyeasiigokm($ucicuwcaawugkseg, Constants::yoayaissyomokiui); } private function iuoowsaoeemaeysu($moqewomugocaueis, $mqyaskyaekmkegmg) { if (!$moqewomugocaueis || !$mqyaskyaekmkegmg) { return; } $ummomuiskoeiqaik = SiteContent::symcgieuakksimmu(); $muowmkwsoauukiag = $ummomuiskoeiqaik->iekyeyicoyyawomk()->oqomcmyuuakigusk($this->caokeucsksukesyo()->skckwsgymkimyuwo()->gwumowwouoisykio([Constants::eggygikowgywcayq => $moqewomugocaueis, Constants::wwcycgyaiaksckuk => $mqyaskyaekmkegmg])); if ($muowmkwsoauukiag) { $ummomuiskoeiqaik->gssiscqyqsacmeca()->sgcuwcowgwimgsgk($muowmkwsoauukiag, true); } } public function cakkuykwauwcesou() { $this->uykissogmuaaocsg()->swwkwyegmykkcccc(); } public function swmkeqggyeewmseu($moqewomugocaueis = null, $mqyaskyaekmkegmg = null) { if (!$moqewomugocaueis || !$mqyaskyaekmkegmg) { return; } $this->uykissogmuaaocsg()->imimyeookyaksoyo($moqewomugocaueis, $mqyaskyaekmkegmg); } public function iqmiseecmyaeewmm($ewgwqamkygiqaawc) { global $post; static $memoucacccgaayow = []; if ($post) { $seumokooiykcomco = $this->caokeucsksukesyo()->ayueggmoqeeukqmq(); $uakimmeaecyoyccu = []; if ($gcqseksiskwueksc = $seumokooiykcomco->iooowgsqoyqseyuu($post, true)) { if (isset($memoucacccgaayow[$gcqseksiskwueksc])) { $ewgwqamkygiqaawc = $memoucacccgaayow[$gcqseksiskwueksc]; } else { $acqqmqmcquukaqsc = $this->uykissogmuaaocsg()->uosumyqkueiykgiu(Setting::iumakqycmqmikeiq, $seumokooiykcomco->gueasuouwqysmomu($post), true); if ($acqqmqmcquukaqsc) { $eqwoegegiamegqsm = $this->caokeucsksukesyo()->skckwsgymkimyuwo(); $swqimwqeweekeusq = $this->caokeucsksukesyo()->wgqqgewcmcemoewo(); $iumiycweoqayuegw = PhraseDictionary::symcgieuakksimmu(); $mgigqqaeseywokym = PhraseMatch::symcgieuakksimmu(); $ummomuiskoeiqaik = SiteContent::symcgieuakksimmu(); $mgsymeokaoqggkcm = ContentSegment::symcgieuakksimmu(); $awymsqoomwemoygk = [Constants::sgiwkasmqqockceq => '0.9', Constants::MEDIUM => '0.75', Constants::ymugckeogmscmacc => '0.6']; $gcsiikksyoeosogw = (int) $this->weysguygiseoukqw(Setting::ciccwiwogecsgwuy, 3); $muowmkwsoauukiag = $this->uykissogmuaaocsg()->iqykecccmksseywo($gcqseksiskwueksc, Constants::mswoacegomcucaik); $xmiqmguyioaoqsaq = $ummomuiskoeiqaik->mwyqswsaeeewsosm($muowmkwsoauukiag); foreach ($acqqmqmcquukaqsc as $ekuqiqmikiicgoss) { $qwwuweqkkiikksks = $ekuqiqmikiicgoss[Setting::cgqecaaeyyesqgmq] ?? $mgsymeokaoqggkcm::yawkygsammoiwywe; $sgogguaosagcseic = $qwwuweqkkiikksks === $mgsymeokaoqggkcm::yawkygsammoiwywe; $sqeymaimcayicmcc = $awymsqoomwemoygk[$ekuqiqmikiicgoss[Setting::cyowccmqmwseceww]] ?? '0.9'; $ycismaaiyaaciyom = $ekuqiqmikiicgoss[Setting::ssueywueuqgowsee] ?? []; $gqgemcmoicmgaqie = $eqwoegegiamegqsm->kyckwuuiqwmyoqma()->mmiqqgoaeccgwoqs($eqwoegegiamegqsm->owackeyiuiikegqg()->ggmcoioqwgyccyus()->sokmmiiuyqiuoqia($mgsymeokaoqggkcm::yuokwskigygossmk))->mmiqqgoaeccgwoqs($eqwoegegiamegqsm->owackeyiuiikegqg()->ggmcoioqwgyccyus()->sokmmiiuyqiuoqia($iumiycweoqayuegw::igsgqsyawmiwquqa)->asumqyigwsqmyeoc($iumiycweoqayuegw))->mmiqqgoaeccgwoqs($eqwoegegiamegqsm->owackeyiuiikegqg($mgigqqaeseywokym->myywwqkyiwawwquy($mgigqqaeseywokym::cscaseoccsekwyms), $mgigqqaeseywokym::cscaseoccsekwyms)->ggmcoioqwgyccyus()->asumqyigwsqmyeoc($mgigqqaeseywokym))->mmiqqgoaeccgwoqs($eqwoegegiamegqsm->megqywqeuquawkim($mgsymeokaoqggkcm->myywwqkyiwawwquy($mgsymeokaoqggkcm::cscaseoccsekwyms), $xmiqmguyioaoqsaq))->mmiqqgoaeccgwoqs($eqwoegegiamegqsm->megqywqeuquawkim($mgigqqaeseywokym->myywwqkyiwawwquy($mgigqqaeseywokym::cscaseoccsekwyms), $xmiqmguyioaoqsaq)->maqiysyuqmwcqoig('!='))->mmiqqgoaeccgwoqs($eqwoegegiamegqsm->megqywqeuquawkim($mgigqqaeseywokym::skgkcgewayieuwsk, $sqeymaimcayicmcc)->maqiysyuqmwcqoig('>=')->kgyigewyuumysume())->mmiqqgoaeccgwoqs($eqwoegegiamegqsm->megqywqeuquawkim(Constants::squoamkioomemiyi, $qwwuweqkkiikksks))->mmiqqgoaeccgwoqs($eqwoegegiamegqsm->megqywqeuquawkim($ummomuiskoeiqaik->myywwqkyiwawwquy(Constants::squoamkioomemiyi), $ycismaaiyaaciyom))->mmiqqgoaeccgwoqs($eqwoegegiamegqsm->owogyemaccuymycq($mgigqqaeseywokym::skgkcgewayieuwsk)->yogqsokgsqemsuoq()->kgyigewyuumysume())->yockscoguugkeumq(Constants::IDENTIFIER)->omaeiiwasuqkeeak(Constants::IDENTIFIER)->omaeiiwasuqkeeak($mgigqqaeseywokym->ssakwymwgcwsqswc(Constants::MAX, $mgigqqaeseywokym::skgkcgewayieuwsk), true)->omaeiiwasuqkeeak($mgsymeokaoqggkcm->ssakwymwgcwsqswc(Constants::MAX, $mgsymeokaoqggkcm::umyomemqwccgmuki), true)->omaeiiwasuqkeeak($ummomuiskoeiqaik->ssakwymwgcwsqswc(Constants::MAX, Constants::squoamkioomemiyi), true)->omaeiiwasuqkeeak($ummomuiskoeiqaik->ssakwymwgcwsqswc(Constants::MAX, Constants::eggygikowgywcayq), true)->omaeiiwasuqkeeak($ummomuiskoeiqaik->ssakwymwgcwsqswc(Constants::MAX, Constants::wwcycgyaiaksckuk), true); $kwyycckiamksuewc = $mgsymeokaoqggkcm->iekyeyicoyyawomk()->cieaqygkucwoqwke($gqgemcmoicmgaqie); if ($kwyycckiamksuewc) { $sqsyqsscqaauwyyy = []; foreach ($kwyycckiamksuewc as $ckkiimuqcimkwmwy) { $gqumacwamusueoqa = $mgsymeokaoqggkcm->waecsyqmwascmqoa($ckkiimuqcimkwmwy, $mgsymeokaoqggkcm::umyomemqwccgmuki, 0); if ($gqumacwamusueoqa > 0) { if (isset($sqsyqsscqaauwyyy[$gqumacwamusueoqa]) && $sqsyqsscqaauwyyy[$gqumacwamusueoqa] >= $gcsiikksyoeosogw) { continue; } if (!isset($sqsyqsscqaauwyyy[$gqumacwamusueoqa])) { $sqsyqsscqaauwyyy[$gqumacwamusueoqa] = 0; } $sqsyqsscqaauwyyy[$gqumacwamusueoqa]++; } $owqaeesoaygymmcy = $mgsymeokaoqggkcm->waecsyqmwascmqoa($ckkiimuqcimkwmwy, Constants::IDENTIFIER); $moqewomugocaueis = $mgsymeokaoqggkcm->waecsyqmwascmqoa($ckkiimuqcimkwmwy, Constants::eggygikowgywcayq); $mqyaskyaekmkegmg = $ummomuiskoeiqaik->ogegcqqcukiaqscy(Constants::wwcycgyaiaksckuk, $ckkiimuqcimkwmwy); if ($mqyaskyaekmkegmg && $moqewomugocaueis) { if (isset($uakimmeaecyoyccu[$mqyaskyaekmkegmg][$moqewomugocaueis])) { continue; } if ($sgogguaosagcseic) { $meqocwsecsywiiqs = $migiiksoiymissge = ''; switch ($mqyaskyaekmkegmg) { case Constants::mswoacegomcucaik: $meqocwsecsywiiqs = $seumokooiykcomco->qcgakseyaikigqco($moqewomugocaueis); $migiiksoiymissge = $seumokooiykcomco->ycqquoiyyuesegsy($moqewomugocaueis); break; case Constants::yoayaissyomokiui: $aoskwucuugeuaeus = $this->caokeucsksukesyo()->kckogqkiycqeumoa(); $meqocwsecsywiiqs = $aoskwucuugeuaeus->qcgakseyaikigqco($moqewomugocaueis); $migiiksoiymissge = $aoskwucuugeuaeus->qmgcisuuikgmqcsu($moqewomugocaueis); break; } $migiiksoiymissge = $this->ocksiywmkyaqseou('auto_link_post_content_segment_permalink', $migiiksoiymissge, $moqewomugocaueis, $mqyaskyaekmkegmg); if ($meqocwsecsywiiqs && $migiiksoiymissge) { $uakimmeaecyoyccu[$mqyaskyaekmkegmg][$moqewomugocaueis] = true; $iwywmkygwewiamwm = $swqimwqeweekeusq->yuawgssgauywkiia('$1', $migiiksoiymissge, ['data-score' => $mgigqqaeseywokym->waecsyqmwascmqoa($ckkiimuqcimkwmwy, $mgigqqaeseywokym::skgkcgewayieuwsk, 0), 'data-identify' => $owqaeesoaygymmcy], $meqocwsecsywiiqs); $ewgwqamkygiqaawc = preg_replace('/<strong\\b[^>]*\\bdata-identify="' . $owqaeesoaygymmcy . '"[^>]*>(.*?)<\\/strong>/i', $iwywmkygwewiamwm, $ewgwqamkygiqaawc); } } else { $sqeykgyoooqysmca = $ummomuiskoeiqaik->waecsyqmwascmqoa($ckkiimuqcimkwmwy, Constants::squoamkioomemiyi); $qookweymeqawmcwo = [Constants::eggygikowgywcayq => $moqewomugocaueis]; switch ($sqeykgyoooqysmca) { case Constants::oguseymmyyoyaako: $qookweymeqawmcwo[Constants::oguseymmyyoyaako] = $this->caokeucsksukesyo()->aqasygcsqysmmyke()->get($moqewomugocaueis); break; default: $qookweymeqawmcwo[$sqeykgyoooqysmca] = $this->caokeucsksukesyo()->ayueggmoqeeukqmq()->get($moqewomugocaueis); break; } $nsmgceoqaqogqmuw = $this->iuygowkemiiwqmiw("none_contentful/{$sqeykgyoooqysmca}", $qookweymeqawmcwo, [Constants::qaacaqioeyiuakeu => false, Constants::wikgqsqysyuoykse => 'none_contentful/index']); if ($nsmgceoqaqogqmuw) { $eouekqmooogkoqoo = '/(<h2[^>]*data-identify="' . preg_quote($owqaeesoaygymmcy, '/') . '"[^>]*>.*?<\\/h2>)(.*?)(?=<h2[^>]*data-identify=|$)/is'; $umwesmmqyeaoecii = preg_replace_callback($eouekqmooogkoqoo, static function ($meyiiwcswqmuggyg) use($nsmgceoqaqogqmuw) { return $meyiiwcswqmuggyg[1] . $meyiiwcswqmuggyg[2] . $nsmgceoqaqogqmuw; }, $ewgwqamkygiqaawc); if ($umwesmmqyeaoecii) { $uakimmeaecyoyccu[$mqyaskyaekmkegmg][$moqewomugocaueis] = true; $ewgwqamkygiqaawc = $umwesmmqyeaoecii; } } } } } } } $memoucacccgaayow[$gcqseksiskwueksc] = $ewgwqamkygiqaawc; } } } } return $ewgwqamkygiqaawc; } public function eiwakaiyeuiosyyk($ukwokcuqauuosmoo, $ucicuwcaawugkseg = 0) { return $ukwokcuqauuosmoo; } public function uoukcoigccuuueis() { Process::symcgieuakksimmu()->scwmiaoyuuuuocwq(1); } public function cysqwocigwyquqas($suaemuyiacqyugsm) { if ($suaemuyiacqyugsm > 0) { $ummomuiskoeiqaik = SiteContent::symcgieuakksimmu(); $siykeiywomwwuoiw = $ummomuiskoeiqaik->iekyeyicoyyawomk()->gqaysymikgeawkqa(); $sogksuscggsicmac = $ummomuiskoeiqaik->iekyeyicoyyawomk()->aeggeuqycwawueqy($siykeiywomwwuoiw, [Constants::imywcsggckkcywgk => $suaemuyiacqyugsm, Constants::ausqeuugegoygouq => 20]); $ewaokemkkcawgmam = $sogksuscggsicmac[Constants::qwumqqyuasyskkkc] ?? []; if ($ewaokemkkcawgmam) { foreach ($ewaokemkkcawgmam as $dacakmaeokqmmeqa) { $this->uykissogmuaaocsg()->cysqwocigwyquqas($dacakmaeokqmmeqa, 1); } if (!$this->caokeucsksukesyo()->asgqmkcukouykiie()->iyiccksyewqymmqg($sogksuscggsicmac, $suaemuyiacqyugsm)) { Process::symcgieuakksimmu()->scwmiaoyuuuuocwq($suaemuyiacqyugsm + 1); } } } } public function ikawswqoouqauuwg($xmiqmguyioaoqsaq, $suaemuyiacqyugsm, bool $goyamqigsmqwymmg = false) { $this->uykissogmuaaocsg()->cysqwocigwyquqas($xmiqmguyioaoqsaq, $suaemuyiacqyugsm, $goyamqigsmqwymmg); } public function iiuomscwsakeqwak() { Process::symcgieuakksimmu()->iicsqissimmcagwu(1); } public function ammmmcskmmswueqe($suaemuyiacqyugsm) { if ($suaemuyiacqyugsm > 0) { $ummomuiskoeiqaik = SiteContent::symcgieuakksimmu(); $siykeiywomwwuoiw = $ummomuiskoeiqaik->iekyeyicoyyawomk()->gqaysymikgeawkqa(); $sogksuscggsicmac = $ummomuiskoeiqaik->iekyeyicoyyawomk()->aeggeuqycwawueqy($siykeiywomwwuoiw, [Constants::imywcsggckkcywgk => $suaemuyiacqyugsm, Constants::ausqeuugegoygouq => 20]); $ewaokemkkcawgmam = $sogksuscggsicmac[Constants::qwumqqyuasyskkkc] ?? []; foreach ($ewaokemkkcawgmam as $dacakmaeokqmmeqa) { $this->uykissogmuaaocsg()->ammmmcskmmswueqe($ummomuiskoeiqaik->mwyqswsaeeewsosm($dacakmaeokqmmeqa)); } if (!$this->caokeucsksukesyo()->asgqmkcukouykiie()->iyiccksyewqymmqg($sogksuscggsicmac, $suaemuyiacqyugsm)) { Process::symcgieuakksimmu()->iicsqissimmcagwu($suaemuyiacqyugsm + 1); } } } }
